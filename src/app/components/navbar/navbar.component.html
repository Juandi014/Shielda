
<nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
  <div class="container-fluid">
    <!-- Brand -->
    <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block" routerLinkActive="active" [routerLink]="['/dashboard']">{{getTitle()}}</a>
    <!-- Form -->
    <form class="navbar-search navbar-search-dark form-inline mr-3 d-none d-md-flex ml-lg-auto">
      <div class="form-group mb-0" [ngClass]="{ 'focused': focus === true }">
        <div class="input-group input-group-alternative">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-search"></i></span>
          </div>
          <input class="form-control" placeholder="Search" type="text" (focus)="focus = true"
          (blur)="focus = false">
        </div>
      </div>
    </form>
    <!-- User -->
  <!-- User -->
<!-- User -->
<ul class="navbar-nav align-items-center d-none d-md-flex">
  <li *ngIf="user?.token; else loginLink" class="nav-item" ngbDropdown placement="bottom-right">
    <a class="nav-link pr-0" role="button" ngbDropdownToggle>
      <div class="media align-items-center">
        <span
          class="avatar avatar-sm rounded-circle"
          [ngStyle]="{
            'background-color': user?.photoUrl ? 'transparent' : stringToColor(user?.email || '')
          }"
        >
          <img
            *ngIf="user?.photoUrl; else noPhoto"
            [src]="user.photoUrl"
            alt="Foto de perfil"
          />
          <ng-template #noPhoto>
            <span class="text-white text-uppercase" style="font-size: 0.9rem; font-weight: bold;">
              {{ getInitial(user?.email || '') }}
            </span>
          </ng-template>
        </span>
        <div class="media-body ml-2 d-none d-lg-block">
          <span class="mb-0 text-sm font-weight-bold">
            {{ user?.name || 'Usuario' }}
          </span>
        </div>
      </div>
    </a>
    <div class="dropdown-menu-arrow dropdown-menu-right" ngbDropdownMenu>
      <div class="dropdown-header noti-title">
        <h6 class="text-overflow m-0">Â¡Hola, {{ user?.name || 'Usuario' }}!</h6>
      </div>
      <a routerLink="/user-profile" class="dropdown-item">
        <i class="ni ni-single-02"></i>
        <span>Mi perfil</span>
      </a>
      <div class="dropdown-divider"></div>
      <a href="#!" class="dropdown-item" (click)="logout()">
        <i class="ni ni-user-run"></i>
        <span>Salir</span>
      </a>
    </div>
  </li>

  <!-- ðŸ” Si no estÃ¡ logueado, muestra botÃ³n de login -->
  <ng-template #loginLink>
    <li class="nav-item">
      <a class="nav-link text-white font-weight-bold" routerLink="/login">
        <i class="ni ni-key-25"></i> Iniciar sesiÃ³n
      </a>
    </li>
  </ng-template>
</ul>


  </div>
</nav>
